package main

import (
	"fmt"
	"net"

	"time"
)

func main() {
	service := "127.0.0.1:9229"
	fmt.Println("Connecting to server at ", service)
	conn, err := net.Dial("udp", service)

	if err != nil {
		fmt.Println("Could not resolve udp address or connect to it  on ", service)
		fmt.Println(err)
		return
	}

	fmt.Println("Connected to server at ", service)
	defer conn.Close()
	fmt.Println("About to write to connection")
	for {

		time.Sleep(1000 * time.Millisecond)
		n, err := conn.Write([]byte("ACC00=0.91268971562386;ACC01=1.000000089407;ACC02=-0.43411359190941;ADI00=-2.5719078630209;ADI01=-4.7019704058766;ADI03=99.314904212952;ADI04=22.706919908524;ADI05=49.614632129669;ADI08=0;ADI09=0;ADI0A=0.26386102102697;ADIXX=0;ADI0B=-0.67798901349306;ADI0C=-3.1658652797341;ADI10=0;AGL00=2881.933775717;ALT00=9665.8473014832;ALT02=28.921342504025;AOA00=13.676094710827;AOA01=0;AOA02=0;AOA03=0;APU00=76.841282844543;APU01=697.38680124283;ASI00=265.05848843303;ASI04=0.74806749820709;ASIXX=0.65058499574661;FAN00=82.592711448669;FAN01=82.738738059998;FFW00=2849.355340004;FFW01=2856.5073013306;HDG00=-143.85170817375;HSI00=124.42985415459;HSI01=124.4707095623;HSI02=124.42985415459;HSI03=-58.930921554565;HSI04=0;HSI05=358.82416248322;HSI06=358.82416248322;HSI09=41.806270727886;HSI0A=45.294126508833;HSI0B=0;HSI0C=0;PSI00=91.982817649841;PSI01=92.082113027573;RPM00=93.618452548981;RPM01=93.515205383301;TMP00=802.73842349376;TMP01=802.90087501134;TNK00=4404.5931100845;TNK01=4404.9557447433;VVI00=-3243.9832687378;647=3342.2064781189;648=3349.4114875793;v900=0;480=0;481=0;482=0;483=0;484=0;485=0;486=0;487=0;488=0;489=0;490=0;491=0;492=0;493=0;494=0;495=0;496=0;497=0;498=0;499=0;500=0;501=0;502=0;503=0;504=0;505=0;506=0;507=0;508=0;509=0;510=0;511=0;512=0;513=0;514=0;515=0;516=0;517=0;518=0;519=0;520=0;521=0;522=0;523=0;524=0;525=0;526=0;527=0;606=0;608=1;610=0;612=1;614=0;616=0;618=0;619=0;620=0;798=0;799=0;191=0;659=0;660=0;661=0;737=0;663=0;215=0;216=0;217=0;664=0;730=0;731=0;732=0;178=0;179=0;181=0;182=0;662=1;665=0;269=0.035326085984707;372=0;373=0;374=0;7=0;8=1;9=1;10=-0.057142842561007;11=0;93=-2.4190196512563e-008;716=0;719=0;263=1;264=0;265=0;266=0;260=0;251=0;252=0.89999997615814;143=0.60000002384186;144=0.40000000596046;145=0;146=0;157=0.15000000596046;158=0;159=0;160=0;771=0;61=0;281=0.1896263808012;274=0.5;604=0.9375;600=0;791=0;792=1;793=0;794=1;CMSP=-----------------------------------------\ntxt_UP\n002 000 1.00 10 \n-----------------------------------------\ntxt_DOWN1\nCHAF-----------------------------------------\ntxt_DOWN2\nFLAR\n-----------------------------------------\ntxt_DOWN3\nINTV\n-----------------------------------------\ntxt_DOWN4\nCYCL"))

		if err != nil {
			fmt.Println("error writing data to server")
			fmt.Println(err)
			return
		}
		if n > 0 {
			fmt.Println("Wrote ", n, " bytes to server")
		}
	}

}
